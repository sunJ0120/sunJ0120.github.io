---
title: "[ì‹ í•œ DS SWì•„ì¹´ë°ë¯¸ / 2ì°¨ í”„ë¡œì íŠ¸] FAST API ì‚¬ìš©í•´ë³´ê¸°"
layout: post
categories: [project]
tags: [data, fast-api]
toc: true
toc_sticky: true
toc_label: ëª©ì°¨
author_profile: true
permalink: /project/fast-api
---

> ğŸ–¤ 2ì°¨ í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ê¸°ìˆ ì„ í•™ìŠµí•´ë³´ì!

# ğŸ©¶ Intro
- ì´ë²ˆì— ë°ì´í„° ê¸°ë°˜ ê°ì • ì¶”ì²œ ì‹œìŠ¤í…œ ê°œë°œì„ ë§¡ìœ¼ë©°, FAST APIë¼ëŠ” ê²ƒì„ ì²˜ìŒ ì‚¬ìš©í•´ë³´ê²Œ ë˜ì—ˆë‹¤.
- ê·¸ëŸ°ê³ ë¡œ, ê³µì‹ ë¬¸ì„œë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°„ë‹¨í•œ ì‚¬ìš©ë²•ì„ ìµí˜€ë³´ë„ë¡ í•˜ì!

# ğŸ¤ Start!
## ê³µì‹ ë¬¸ì„œ
[FastAPI](https://fastapi.tiangolo.com/ko/)

## FAST APIë€?
- FastAPIëŠ” í˜„ëŒ€ì ì´ê³ , ë¹ ë¥´ë©°(ê³ ì„±ëŠ¥), íŒŒì´ì¬ í‘œì¤€ íƒ€ì… íŒíŠ¸ì— ê¸°ì´ˆí•œ Pythonì˜ APIë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•œ ì›¹ ì„œë²„ í”„ë ˆì„ì›Œí¬ì´ë‹¤.
- íŠ¹ì§•: ë¹ ë¥¸ ê°œë°œ + ë¹ ë¥¸ ì‹¤í–‰ + ìë™ ë¬¸ì„œí™”
  - ì‚¬ìš© ê°€ëŠ¥í•œ ê°€ì¥ ë¹ ë¥¸ íŒŒì´ì¬ í”„ë ˆì„ì›Œí¬ ì¤‘ í•˜ë‚˜ë¼ê³  í•œë‹¤.
- ì£¼ë¡œ **ë°±ì—”ë“œ API ì„œë²„**ë¥¼ ë§Œë“œëŠ” ë° ì‚¬ìš©í•œë‹¤. (ì›¹Â·ì•± í´ë¼ì´ì–¸íŠ¸ì—ì„œ í˜¸ì¶œí•˜ëŠ” HTTP API)

## ì£¼ìš” íŠ¹ì§•
> - **Starlette(ë¹„ë™ê¸° ì›¹ ì„œë²„ í”„ë ˆì„ì›Œí¬)**
>   1. **Starlette**ì€ íŒŒì´ì¬ ê¸°ë°˜ì˜ **ë¹„ë™ê¸°(Async) ì›¹ ì„œë²„ í”„ë ˆì„ì›Œí¬ì´ë‹¤.**
>   2. ë¹„ë™ê¸° ì‘ë™ì„ í†µí•´, ë™ì‹œ ì²˜ë¦¬ ëŠ¥ë ¥ì´ ì¦ê°€í•˜ì—¬ íš¨ìœ¨ì„±ì´ ì¢‹ì•„ì§ (ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë‹¤ë¥¸ ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ)
>   3. Flaskë‚˜ Django ê°™ì€ ì›¹ í”„ë ˆì„ì›Œí¬ë‘ ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ì§€ë§Œ, ì°¨ë³„ì ì€ **ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°(AsyncIO)**ë¥¼ ì˜ ì§€ì›í•œë‹¤ëŠ” ì ì´ë‹¤.
>   4. FastAPIëŠ” ì‹¤ì œë¡œ **ì›¹ ì„œë²„ ë™ì‘(ë¼ìš°íŒ…, ìš”ì²­/ì‘ë‹µ, ë¯¸ë“¤ì›¨ì–´, WebSocket, ì„¸ì…˜, CORS ë“±)** ë¶€ë¶„ì„ **Starletteì— ìœ„ì„í•œë‹¤.**
> - **Pydantic(ë°ì´í„° ê²€ì¦)**
>   1. íŒŒì´ì¬ì—ì„œ **ë°ì´í„° ê²€ì¦(Validation)**ê³¼ **ë°ì´í„° ëª¨ë¸ë§**ì„ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.
>   2. â€œì™¸ë¶€ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ë°ì´í„°(JSON, ìš”ì²­ íŒŒë¼ë¯¸í„° ë“±)ê°€ ë‚´ê°€ ì›í•˜ëŠ” í˜•íƒœ(íƒ€ì…, í˜•ì‹)ì— ë§ëŠ”ì§€ ìë™ìœ¼ë¡œ ê²€ì‚¬í•´ì£¼ê³ , ì•ˆ ë§ìœ¼ë©´ ì˜¤ë¥˜ë¥¼ ì•Œë ¤ì£¼ëŠ” ë„êµ¬â€ë¼ê³  í•  ìˆ˜ ìˆë‹¤.
>   3. FastAPIëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë“¤ì–´ì˜¨ ìš”ì²­ ë°ì´í„°ë¥¼ Pydanticìœ¼ë¡œ ê²€ì¦í•œ ë’¤, **ìë™ìœ¼ë¡œ íŒŒì´ì¬ ê°ì²´ë¡œ ë³€í™˜**í•´ì¤€ë‹¤.
>   4. ì´ë¥¼ í†µí•´ swagger ìë™ ë¬¸ì„œí™”ê°€ ê°€ëŠ¥í•˜ê³ , ë°ì´í„° ìœ íš¨ì„± ê²€ì¦ ìë™í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.


1. ë¹ ë¥¸ ì†ë„
   - ë‚´ë¶€ì ìœ¼ë¡œ **Starlette(ë¹„ë™ê¸° ì›¹ ì„œë²„ í”„ë ˆì„ì›Œí¬)** + **Pydantic(ë°ì´í„° ê²€ì¦)** ì„ ì¡°í•©í•´ì„œ ì‚¬ìš©í•œë‹¤.
   - **Starlette(ë¹„ë™ê¸° ì›¹ ì„œë²„ í”„ë ˆì„ì›Œí¬), Pydantic(ë°ì´í„° ê²€ì¦)**
   - Flaskë³´ë‹¤ ë¹ ë¥´ê³ , Node.js ìˆ˜ì¤€ ì†ë„ë„ ê°€ëŠ¥ (ASGI ê¸°ë°˜)
2. ìë™ ë¬¸ì„œí™”
   - ì„œë²„ ì‹¤í–‰í•˜ë©´ `/docs`(Swagger UI), `/redoc`(ReDoc) ìë™ ìƒì„±ëœë‹¤.
   - ìš”ì²­/ì‘ë‹µ ëª¨ë¸ì„ Pydanticìœ¼ë¡œ ì •ì˜í•˜ë©´ ìë™ìœ¼ë¡œ ì˜ˆì˜ê²Œ ë¬¸ì„œí™”ëœë‹¤.
3. íƒ€ì… íŒíŠ¸ ê¸°ë°˜ ê°œë°œ
   - í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ì— íƒ€ì… íŒíŠ¸ë¥¼ ì“°ë©´ â†’ ì…ë ¥ê°’ ìë™ ê²€ì¦ + ë¬¸ì„œí™”ê¹Œì§€
   - ì˜ˆ: `def hello(age: int)` â†’ `age`ê°€ ë¬¸ìì—´ë¡œ ë“¤ì–´ì˜¤ë©´ ìë™ìœ¼ë¡œ 422 ì˜¤ë¥˜ ë°˜í™˜
4. ë¹„ë™ê¸° ì§€ì›
   - `async def`ë¡œ ì‘ì„± ê°€ëŠ¥í•˜ë‹¤.
     - ì´ë¥¼ í†µí•´ ë¹ ë¥¸ ë™ì‹œì„± ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.
   - ì‹¤ì‹œê°„ ì„œë¹„ìŠ¤(ì±„íŒ…, IoT, ì¶”ì²œ API)ì—ë„ ì í•©í•˜ë‹¤.
5. Pythonic & ê°€ë²¼ì›€
   - Flaskì²˜ëŸ¼ ë°°ìš°ê¸° ì‰½ì§€ë§Œ, Djangoì²˜ëŸ¼ ë¬´ê²ì§€ ì•Šë‹¤.
   - ë°ì´í„° ê²€ì¦(Pydantic) + ê²½ë¡œ/ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì²˜ë¦¬ ëª¨ë‘ ë‚´ì¥í•˜ê³  ìˆë‹¤.

## ì‹¤ìŠµ ì‹œì‘!
### í™˜ê²½ ì„¤ì •
#### 1. íŒŒì´ì¬ ì„¤ì¹˜í•˜ê³ , pip version í™•ì¸í•˜ê¸°

```bash
sspur@sunj-PC MINGW64 /c/developer/GitHub/5th__sinhhanDStudy/data/fastapi (main)
$ python --version
Python 3.13.7

sspur@sunj-PC MINGW64 /c/developer/GitHub/5th__sinhhanDStudy/data/fastapi (main)
$ pip --version
pip 25.2 from C:\Users\sspur\AppData\Local\Programs\Python\Python313\Lib\site-packages\pip (python 3.13)
```
#### 2. fast api ì„¤ì¹˜
```bash
sspur@sunj-PC MINGW64 /c/developer/GitHub/5th__sinhhanDStudy/data/fastapi (main)
$ pip install fastapi
```
#### 3. Uvicorn ì„¤ì¹˜
```bash
sspur@sunj-PC MINGW64 /c/developer/GitHub/5th__sinhhanDStudy/data/fastapi (main)
$ pip install "uvicorn[standard]"
```
- í”„ë¡œë•ì…˜ì„ ìœ„í•´ ASGI ì„œë²„ë„ í•„ìš”í•˜ë‹¤.
  - í”„ë¡œë•ì…˜(Production)ì´ë€? (ì‹¤ì œ ìš´ì˜ í™˜ê²½)
    - ì‹¤ì œ ì„œë¹„ìŠ¤ê°€ ìœ ì €ë“¤í•œí…Œ ì œê³µë˜ëŠ” í™˜ê²½ (ìš´ì˜ ì„œë²„, ë°°í¬ ì„œë²„)
    - ì•ˆì •ì„±, ë³´ì•ˆ, ì„±ëŠ¥ì´ ì¤‘ìš”í•˜ê³  ë””ë²„ê·¸ ëª¨ë“œê°€ ì—†ë‹¤.
  - ASGI ì„œë²„ë€?
    - ASGI = Asynchronous Server Gateway Interface
    - íŒŒì´ì¬ ì›¹ ì„œë²„ì™€ í”„ë ˆì„ì›Œí¬(FastAPI, Django ë“±)ë¥¼ ì—°ê²°í•´ì£¼ëŠ” **í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.**
    - ë¹„ë™ê¸°ë¥¼ ì§€ì›í•œë‹¤.
- ì´ ASGI ì„œë²„ ì¤‘ ê°€ì¥ ë§ì´ ì“°ë¼ê³  ê¶Œì¥í•˜ëŠ” ì„œë²„ê°€ Uvicornì´ë‹¤.

## ì˜ˆì œ
### ë§Œë“¤ê¸°

```python
from typing import Union

from fastapi import FastAPI

app = FastAPI()

@app.get("/")
def read_root() : 
    return {"Hello" : "World"}

@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None) : 
    return {"item_id" : item_id, "q" : q}
```

- q: Union[str, None] = None
  - `q`ë¼ëŠ” **ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**ë¥¼ ë°›ì„ ê±´ë°,
  - íƒ€ì…ì€ str ë˜ëŠ” Noneì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
  - ê¸°ë³¸ê°’ì€ `None`ì´ë‹¤.
  - `Union[X, Y]` = "ì´ ê°’ì€ X íƒ€ì…ì¼ ìˆ˜ë„, Y íƒ€ì…ì¼ ìˆ˜ë„ ìˆë‹¤"

### ì„œë²„ ì‹¤í–‰
```bash
sspur@sunj-PC MINGW64 /c/developer/GitHub/5th__sinhhanDStudy/data/fastapi (main)
$ uvicorn main:app --reload
```

### ì‹¤í–‰ ê²°ê³¼ í™•ì¸
- http://127.0.0.1:8000/items/5?q=somequery
  - ì—¬ê¸° ë“¤ì–´ê°€ë©´ ì‹¤í–‰ ê²°ê³¼ JSONì„ ë³¼ ìˆ˜ ìˆë‹¤.

```json
{"item_id":5,"q":"somequery"}
```

- ë¡œê·¸ í™•ì¸
```bash
$ uvicorn main:app --reload
INFO:     Will watch for changes in these directories: ['C:\\developer\\GitHub\\5th__sinhhanDStudy\\data\\fastapitest']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [9208] using WatchFiles
INFO:     Started server process [8052]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:54481 - "GET /items/5?q=somequery HTTP/1.1" 200 OK
INFO:     127.0.0.1:54481 - "GET /favicon.ico HTTP/1.1" 404 Not Found
```
- 127.0.0.1:54481 - "GET /items/5?q=somequery HTTP/1.1" 200 OK
  - ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### ìŠ¤ì›¨ê±° ë¬¸ì„œ í™•ì¸í•˜ê¸°
- http://127.0.0.1:8000/docs ì„ ë“¤ì–´ê°€ë³´ì.
![image.png](/images/2025-08-27-fast-api/2.png)
- ë¬¸ì„œê°€ ì˜ ë§Œë“¤ì–´ì ¸ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
![image.png](/images/2025-08-27-fast-api/1.png)
- ë™ì‘ ë˜í•œ ì˜ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

## ì˜ˆì œ ì‹¬í™”
### put ìš”ì²­ì— ìˆëŠ” ë³¸ë¬¸(Body) ë°›ê¸°
```python
from typing import Union

from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel) : 
    name : str
    price : float
    is_offer : Union[bool, None] = None

@app.get("/")
def read_root():
    return {"Hello": "World"}

@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}

@app.put("/items/{item_id}")
def update_item(item_id: int, item : Item) : 
    return {"item_name" : item.name, "item_id" : item_id}
```
- ì¶”ê°€ëœ ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

```python
class Item(BaseModel) : 
    name : str
    price : float
    is_offer : Union[bool, None] = None

@app.put("/items/{item_id}")
def update_item(item_id: int, item : Item) : 
    return {"item_name" : item.name, "item_id" : item_id}
```
- `item: Item` â†’ **ìš”ì²­(Request) body**ì— JSONì´ ë“¤ì–´ì˜¤ë©´
  - Pydantic(`Item` ëª¨ë¸)ì´ **ìë™ìœ¼ë¡œ íŒŒì‹± + ê²€ì¦í•œë‹¤.**
  - ê·¸ë˜ì„œ bodyì— ë„£ì€ ì •ë³´ë“¤ì„ item ê°ì²´ì— ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•´ì£¼ëŠ” ê²ƒì´ë‹¤.
- ìŠ¤ì›¨ê±°ë¥¼ ì‹¤í–‰í•´ì„œ ì§ì ‘ bodyì— ë°ì´í„°ë¥¼ ì‹¤ì–´ì„œ ë³´ë‚´ë³´ì.

![image.png](/images/2025-08-27-fast-api/3.png)
![image.png](/images/2025-08-27-fast-api/4.png)

## ì •ë¦¬
- ì§€ê¸ˆê¹Œì§€ í•™ìŠµí•œ ê²ƒì„ ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤!
1. `@app.get`, `@app.post`, `@app.put` ê°™ì€ **ì—”ë“œí¬ì¸íŠ¸ ë§Œë“¤ê¸°**
2. `BaseModel`ë¡œ **ì…ë ¥ ë°ì´í„° ê²€ì¦í•˜ê¸°**
3. `return {...}` ìœ¼ë¡œ **JSON ì‘ë‹µí•˜ê¸°**
4. `uvicorn main:app --reload` ë¡œ ì„œë²„ ì‹¤í–‰í•˜ê¸°
5. Swagger UI (`http://127.0.0.1:8000/docs`) ìë™ í™•ì¸
